[Script Info]
; Script generated by Aegisub 3.2.2
; http://www.aegisub.org/
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
YCbCr Matrix: TV.601
PlayResX: 1920
PlayResY: 1080

[Aegisub Project Garbage]
Audio File: uwp58WeatherSetup_high.mp4
Video File: uwp58WeatherSetup_high.mp4
Video AR Mode: 4
Video AR Value: 1.777778
Video Zoom Percent: 0.375000
Active Line: 14
Video Position: 1381

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,微软雅黑,50,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,50,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:04.73,0:00:06.85,Default,,0,0,0,,好滴，我们开始了，我们先\NAlright, so to get started, we're going to do
Dialogue: 0,0:00:06.85,0:00:08.93,Default,,0,0,0,,把项目建起来，然后我们some basic Project setup, and then we're going to
Dialogue: 0,0:00:08.93,0:00:12.69,Default,,0,0,0,,立即讲一些如何处理\Ntalk immediately about our approach
Dialogue: 0,0:00:12.69,0:00:15.17,Default,,0,0,0,,天气API\Nworking with the Weather API.
Dialogue: 0,0:00:15.17,0:00:16.63,Default,,0,0,0,,好，让我们继续，开始创建\NSo let's go ahead and get started by just
Dialogue: 0,0:00:16.63,0:00:18.29,Default,,0,0,0,,一个新的项目，不让这影响\Ncreating a new Project and getting that part
Dialogue: 0,0:00:18.29,0:00:20.62,Default,,0,0,0,,我们下面的课程\Nof it out of the way.
Dialogue: 0,0:00:20.62,0:00:23.14,Default,,0,0,0,,找到正确的\NWe'll find our correct
Dialogue: 0,0:00:23.14,0:00:25.36,Default,,0,0,0,,空白的应用模板\NBlank App template here.
Dialogue: 0,0:00:25.36,0:00:28.11,Default,,0,0,0,,我把它命名为UWPWeather\NI'm going to call this UWPWeather.
Dialogue: 0,0:00:36.14,0:00:38.84,Default,,0,0,0,,首先，我们要做的是\NOkay, and first thing I'm going to do here
Dialogue: 0,0:00:38.85,0:00:41.63,Default,,0,0,0,,去掉这个帧计数器\Nis get rid of the frame counter,
Dialogue: 0,0:00:41.63,0:00:44.36,Default,,0,0,0,,像往常一样，打开MainPage.xaml\Nlike always, and I'll open up the MainPage.xaml
Dialogue: 0,0:00:44.37,0:00:46.06,Default,,0,0,0,,MainPage.xaml
Dialogue: 0,0:00:46.06,0:00:48.70,Default,,0,0,0,,So what I have envisioned here is a
Dialogue: 0,0:00:48.70,0:00:50.15,Default,,0,0,0,,pretty simple application.
Dialogue: 0,0:00:50.16,0:00:53.85,Default,,0,0,0,,It's just going to have the current weather
Dialogue: 0,0:00:53.86,0:00:55.67,Default,,0,0,0,,for the current location you're at.
Dialogue: 0,0:00:55.68,0:00:57.91,Default,,0,0,0,,You can extend this, and I'll show you how
Dialogue: 0,0:00:57.92,0:01:00.38,Default,,0,0,0,,you can make this as complicated
Dialogue: 0,0:01:00.38,0:01:02.85,Default,,0,0,0,,and as feature-rich as you want.
Dialogue: 0,0:01:02.86,0:01:04.65,Default,,0,0,0,,It's just pretty much more of the same
Dialogue: 0,0:01:04.66,0:01:06.59,Default,,0,0,0,,of what I'm going to show you here
Dialogue: 0,0:01:06.60,0:01:10.18,Default,,0,0,0,,in this lesson, in these lessons.
Dialogue: 0,0:01:10.18,0:01:12.68,Default,,0,0,0,,Now that we have that in place,
Dialogue: 0,0:01:12.68,0:01:15.08,Default,,0,0,0,,I'm going to go ahead and minimize this.
Dialogue: 0,0:01:15.08,0:01:17.46,Default,,0,0,0,,We're going to pull our data from
Dialogue: 0,0:01:17.46,0:01:21.42,Default,,0,0,0,,a website called openweathermap.org.
Dialogue: 0,0:01:21.42,0:01:23.37,Default,,0,0,0,,By all rights, if you're going to use this
Dialogue: 0,0:01:23.37,0:01:25.77,Default,,0,0,0,,in a commercial product, you need to sign up
Dialogue: 0,0:01:25.77,0:01:29.51,Default,,0,0,0,,for an API, and then if your requests
Dialogue: 0,0:01:30.55,0:01:34.17,Default,,0,0,0,,are in excess of a certain number per month,
Dialogue: 0,0:01:36.26,0:01:37.94,Default,,0,0,0,,you'll need to get a
Dialogue: 0,0:01:39.26,0:01:40.83,Default,,0,0,0,,paid license.
Dialogue: 0,0:01:40.84,0:01:44.19,Default,,0,0,0,,For example, for $180 a month, as I record this,
Dialogue: 0,0:01:44.19,0:01:47.35,Default,,0,0,0,,you can have 30,000 API calls per minute.
Dialogue: 0,0:01:47.35,0:01:50.01,Default,,0,0,0,,Now, for just our own purposes
Dialogue: 0,0:01:50.02,0:01:52.95,Default,,0,0,0,,in learning and development, we're not
Dialogue: 0,0:01:52.95,0:01:55.67,Default,,0,0,0,,going to get any more than 1,200 APIs per minute,
Dialogue: 0,0:01:55.67,0:01:57.91,Default,,0,0,0,,API calls per minute, but here again,
Dialogue: 0,0:01:57.91,0:02:00.79,Default,,0,0,0,,you probably need to consult their website.
Dialogue: 0,0:02:00.79,0:02:02.55,Default,,0,0,0,,I'm not lawyer, I don't understand all
Dialogue: 0,0:02:02.55,0:02:04.53,Default,,0,0,0,,of the ramifications of this.
Dialogue: 0,0:02:04.53,0:02:07.03,Default,,0,0,0,,This is purely for us learning how to make
Dialogue: 0,0:02:07.03,0:02:09.39,Default,,0,0,0,,a call to a web service.
Dialogue: 0,0:02:09.39,0:02:11.43,Default,,0,0,0,,So I'm going to leave that part of it
Dialogue: 0,0:02:11.44,0:02:13.17,Default,,0,0,0,,between you and OpenWeatherMap,
Dialogue: 0,0:02:13.18,0:02:15.00,Default,,0,0,0,,but I'm going to look at the API.
Dialogue: 0,0:02:15.00,0:02:16.76,Default,,0,0,0,,There's several different weather APIs
Dialogue: 0,0:02:16.76,0:02:17.94,Default,,0,0,0,,that we can call.
Dialogue: 0,0:02:17.94,0:02:20.42,Default,,0,0,0,,API will be
Dialogue: 0,0:02:21.49,0:02:24.64,Default,,0,0,0,,basically a web-callable API.
Dialogue: 0,0:02:24.65,0:02:27.55,Default,,0,0,0,,That means we use a URL to make a call,
Dialogue: 0,0:02:27.56,0:02:30.43,Default,,0,0,0,,and it will deliver back to us either JSON
Dialogue: 0,0:02:30.44,0:02:32.96,Default,,0,0,0,,or XML or some file format that then
Dialogue: 0,0:02:32.96,0:02:36.08,Default,,0,0,0,,we can parse through and use as data
Dialogue: 0,0:02:36.08,0:02:37.87,Default,,0,0,0,,for our application.
Dialogue: 0,0:02:37.88,0:02:39.47,Default,,0,0,0,,There's current weather data, which is
Dialogue: 0,0:02:39.48,0:02:40.34,Default,,0,0,0,,the one we're going to use.
Dialogue: 0,0:02:40.34,0:02:42.28,Default,,0,0,0,,There's also 5 day/3 hour forecasts,
Dialogue: 0,0:02:42.28,0:02:44.50,Default,,0,0,0,,16 day/daily forecast,
Dialogue: 0,0:02:44.50,0:02:46.64,Default,,0,0,0,,a bunch of other APIs.
Dialogue: 0,0:02:46.64,0:02:48.32,Default,,0,0,0,,We're going to focus on this first one,
Dialogue: 0,0:02:48.32,0:02:50.84,Default,,0,0,0,,the current weather data.
Dialogue: 0,0:02:50.84,0:02:54.69,Default,,0,0,0,,You can see in the openweathermap.org/current
Dialogue: 0,0:02:54.69,0:02:58.07,Default,,0,0,0,,that there are different ways to make calls
Dialogue: 0,0:02:58.08,0:02:59.79,Default,,0,0,0,,into this weather API.
Dialogue: 0,0:02:59.79,0:03:03.53,Default,,0,0,0,,For example, if all we have is the
Dialogue: 0,0:03:05.05,0:03:06.97,Default,,0,0,0,,city name, then we can give it
Dialogue: 0,0:03:06.97,0:03:09.98,Default,,0,0,0,,something like that,
Dialogue: 0,0:03:09.99,0:03:13.55,Default,,0,0,0,,where we replace this curly brace
Dialogue: 0,0:03:13.55,0:03:16.18,Default,,0,0,0,,city name with, for example, Dallas
Dialogue: 0,0:03:16.18,0:03:18.56,Default,,0,0,0,,or Dallas, USA.
Dialogue: 0,0:03:19.61,0:03:22.92,Default,,0,0,0,,We would get back the weather, the current weather
Dialogue: 0,0:03:22.92,0:03:25.70,Default,,0,0,0,,for that location.
Dialogue: 0,0:03:25.70,0:03:27.12,Default,,0,0,0,,So there's a number of different ways
Dialogue: 0,0:03:27.12,0:03:29.08,Default,,0,0,0,,that we can acquire this.
Dialogue: 0,0:03:29.08,0:03:31.40,Default,,0,0,0,,We can use a city ID.
Dialogue: 0,0:03:31.40,0:03:34.65,Default,,0,0,0,,There's a list of IDs that we can download
Dialogue: 0,0:03:36.22,0:03:37.35,Default,,0,0,0,,and utilize.
Dialogue: 0,0:03:37.35,0:03:40.72,Default,,0,0,0,,We can get to the weather by geographic coordinates.
Dialogue: 0,0:03:40.72,0:03:42.40,Default,,0,0,0,,This is the one that we're going to use
Dialogue: 0,0:03:42.40,0:03:44.38,Default,,0,0,0,,because we're going to use our
Dialogue: 0,0:03:44.38,0:03:46.76,Default,,0,0,0,,device's built-in GPS functionality
Dialogue: 0,0:03:46.76,0:03:49.44,Default,,0,0,0,,or location functionality to bring us back
Dialogue: 0,0:03:49.44,0:03:52.66,Default,,0,0,0,,the latitude/longitude for
Dialogue: 0,0:03:52.66,0:03:54.80,Default,,0,0,0,,the current position of our device,
Dialogue: 0,0:03:54.80,0:03:58.18,Default,,0,0,0,,and then we'll deliver that as latitude
Dialogue: 0,0:03:58.18,0:04:01.43,Default,,0,0,0,,and longitude to this API call,
Dialogue: 0,0:04:01.43,0:04:04.59,Default,,0,0,0,,and retrieve back the current weather conditions for it.
Dialogue: 0,0:04:04.59,0:04:06.78,Default,,0,0,0,,We could also use ZIP code.
Dialogue: 0,0:04:06.78,0:04:09.14,Default,,0,0,0,,There's some advanced scenarios, as well,
Dialogue: 0,0:04:09.14,0:04:11.24,Default,,0,0,0,,that we're not going to really worry about
Dialogue: 0,0:04:11.24,0:04:13.18,Default,,0,0,0,,all that much.
Dialogue: 0,0:04:13.18,0:04:14.48,Default,,0,0,0,,But if you like, you could scroll down,
Dialogue: 0,0:04:14.48,0:04:16.18,Default,,0,0,0,,you could learn a lot about
Dialogue: 0,0:04:16.18,0:04:18.42,Default,,0,0,0,,what's delivered back to you
Dialogue: 0,0:04:18.42,0:04:20.38,Default,,0,0,0,,when you make one of these calls
Dialogue: 0,0:04:20.38,0:04:21.94,Default,,0,0,0,,into this API.
Dialogue: 0,0:04:21.94,0:04:23.90,Default,,0,0,0,,So let's do this.
Dialogue: 0,0:04:23.90,0:04:26.14,Default,,0,0,0,,What we'll do, first of all, I'm going to start
Dialogue: 0,0:04:26.14,0:04:29.65,Default,,0,0,0,,by saying Dallas
Dialogue: 0,0:04:29.65,0:04:31.29,Default,,0,0,0,,latitude longitude
Dialogue: 0,0:04:32.50,0:04:34.48,Default,,0,0,0,,This will give me back the coordinates.
Dialogue: 0,0:04:34.48,0:04:36.99,Default,,0,0,0,,32.77 North.
Dialogue: 0,0:04:38.24,0:04:40.33,Default,,0,0,0,,I think this is a,
Dialogue: 0,0:04:40.33,0:04:43.62,Default,,0,0,0,,it might be negative 96.79 West,
Dialogue: 0,0:04:43.62,0:04:46.14,Default,,0,0,0,,so West would be a negative.
Dialogue: 0,0:04:46.15,0:04:47.91,Default,,0,0,0,,But any rate, let me copy those coordinates
Dialogue: 0,0:04:47.91,0:04:49.87,Default,,0,0,0,,and put them just in a little notepad file
Dialogue: 0,0:04:49.87,0:04:52.06,Default,,0,0,0,,that I have here offscreen so that
Dialogue: 0,0:04:52.07,0:04:54.44,Default,,0,0,0,,I can remember those.
Dialogue: 0,0:04:54.45,0:04:56.99,Default,,0,0,0,,Then what we'll do is we'll come back over here,
Dialogue: 0,0:04:56.99,0:04:59.88,Default,,0,0,0,,and I'm going to
Dialogue: 0,0:04:59.89,0:05:01.65,Default,,0,0,0,,find this.
Dialogue: 0,0:05:03.05,0:05:04.46,Default,,0,0,0,,In fact, let me just go ahead and click on it
Dialogue: 0,0:05:04.46,0:05:05.74,Default,,0,0,0,,to start off with.
Dialogue: 0,0:05:05.75,0:05:07.92,Default,,0,0,0,,Then I'm going to change the latitude
Dialogue: 0,0:05:07.93,0:05:10.20,Default,,0,0,0,,and longitude here
Dialogue: 0,0:05:10.21,0:05:13.34,Default,,0,0,0,,to 32.77.
Dialogue: 0,0:05:14.50,0:05:18.37,Default,,0,0,0,,Then I'll change the latitude to a negative
Dialogue: 0,0:05:18.37,0:05:21.06,Default,,0,0,0,,96.79.
Dialogue: 0,0:05:21.06,0:05:22.84,Default,,0,0,0,,I'm going to see what we get back.
Dialogue: 0,0:05:22.84,0:05:24.16,Default,,0,0,0,,You can see what we get back
Dialogue: 0,0:05:24.16,0:05:26.36,Default,,0,0,0,,is a series of JSON,
Dialogue: 0,0:05:27.82,0:05:30.19,Default,,0,0,0,,JSON, JavaScript Object Notation, a very
Dialogue: 0,0:05:30.19,0:05:33.49,Default,,0,0,0,,lightweight way of exposing data
Dialogue: 0,0:05:33.49,0:05:36.99,Default,,0,0,0,,over the Internet, very common way of exposing data.
Dialogue: 0,0:05:36.99,0:05:39.25,Default,,0,0,0,,While this might look a little convoluted,
Dialogue: 0,0:05:39.25,0:05:42.31,Default,,0,0,0,,it actually follows a very simple pattern.
Dialogue: 0,0:05:42.31,0:05:44.67,Default,,0,0,0,,But let's do this, I'm going to actually
Dialogue: 0,0:05:44.67,0:05:48.09,Default,,0,0,0,,use my mouse to select that entire
Dialogue: 0,0:05:48.09,0:05:50.53,Default,,0,0,0,,JSON string that even runs off to the
Dialogue: 0,0:05:50.53,0:05:52.83,Default,,0,0,0,,right-hand side of the screen.
Dialogue: 0,0:05:52.83,0:05:54.57,Default,,0,0,0,,I'm going to hit Control+C to copy this
Dialogue: 0,0:05:54.57,0:05:55.73,Default,,0,0,0,,to my clipboard.
Dialogue: 0,0:05:55.73,0:05:56.99,Default,,0,0,0,,Then I'm going to go to another website
Dialogue: 0,0:05:56.99,0:05:58.99,Default,,0,0,0,,called json2csharp.
Dialogue: 0,0:05:58.99,0:06:00.35,Default,,0,0,0,,What this is going to allow me to do
Dialogue: 0,0:06:00.35,0:06:03.97,Default,,0,0,0,,is to paste in the JSON, right like this,
Dialogue: 0,0:06:03.97,0:06:06.49,Default,,0,0,0,,and now when I hit Generate, what'll happen
Dialogue: 0,0:06:06.49,0:06:09.37,Default,,0,0,0,,is it'll create a series of classes
Dialogue: 0,0:06:09.37,0:06:11.18,Default,,0,0,0,,that represent that JSON.
Dialogue: 0,0:06:11.18,0:06:14.32,Default,,0,0,0,,So now I have C# classes that I
Dialogue: 0,0:06:14.32,0:06:17.61,Default,,0,0,0,,can then deserialize the JSON
Dialogue: 0,0:06:17.61,0:06:21.41,Default,,0,0,0,,into these strongly typed classes in C#.
Dialogue: 0,0:06:22.49,0:06:24.50,Default,,0,0,0,,So you can see at the very highest level here,
Dialogue: 0,0:06:24.50,0:06:26.34,Default,,0,0,0,,I'll have a RootObject.
Dialogue: 0,0:06:26.34,0:06:30.48,Default,,0,0,0,,This RootObject will have a List of Weather items.
Dialogue: 0,0:06:30.48,0:06:33.64,Default,,0,0,0,,Then there's just a series of
Dialogue: 0,0:06:33.64,0:06:36.23,Default,,0,0,0,,other classes that were created, a main class,
Dialogue: 0,0:06:36.23,0:06:39.63,Default,,0,0,0,,a wind class, a rain class, a clouds class
Dialogue: 0,0:06:39.63,0:06:42.67,Default,,0,0,0,,and other information as well.
Dialogue: 0,0:06:42.67,0:06:44.67,Default,,0,0,0,,For example, this Sys class will give us
Dialogue: 0,0:06:44.67,0:06:48.56,Default,,0,0,0,,the county, a message, the sunrise, sunset times.
Dialogue: 0,0:06:48.56,0:06:50.72,Default,,0,0,0,,Just a ton of information.
Dialogue: 0,0:06:50.72,0:06:54.38,Default,,0,0,0,,In the main class, there's pressure, humidity.
Dialogue: 0,0:06:54.38,0:06:56.96,Default,,0,0,0,,In the weather class, we can get an icon
Dialogue: 0,0:06:56.96,0:07:00.05,Default,,0,0,0,,and a description for the current weather.
Dialogue: 0,0:07:01.25,0:07:03.19,Default,,0,0,0,,What we're going to do is actually I'm going to copy
Dialogue: 0,0:07:03.19,0:07:06.14,Default,,0,0,0,,all of this
Dialogue: 0,0:07:06.15,0:07:08.05,Default,,0,0,0,,to my clipboard.
Dialogue: 0,0:07:08.05,0:07:10.91,Default,,0,0,0,,I'm going to create something called,
Dialogue: 0,0:07:10.91,0:07:13.07,Default,,0,0,0,,here in Visual Studio.
Dialogue: 0,0:07:14.25,0:07:17.03,Default,,0,0,0,,I'm going to go over here and right-click.
Dialogue: 0,0:07:17.03,0:07:19.29,Default,,0,0,0,,Actually, let me go ahead and select
Dialogue: 0,0:07:19.29,0:07:21.79,Default,,0,0,0,,Project, Add Class.
Dialogue: 0,0:07:21.79,0:07:24.44,Default,,0,0,0,,I'm going to call this
Dialogue: 0,0:07:28.02,0:07:30.67,Default,,0,0,0,,OpenWeatherMapProxy.
Dialogue: 0,0:07:30.67,0:07:33.35,Default,,0,0,0,,A proxy is a go-between.
Dialogue: 0,0:07:33.35,0:07:35.59,Default,,0,0,0,,That might not be the best name for this,
Dialogue: 0,0:07:35.59,0:07:38.31,Default,,0,0,0,,but it's what came off the top of my head.
Dialogue: 0,0:07:39.53,0:07:41.90,Default,,0,0,0,,Inside of this, I'm actually going to paste
Dialogue: 0,0:07:41.91,0:07:44.80,Default,,0,0,0,,all these other classes as well.
Dialogue: 0,0:07:44.81,0:07:46.75,Default,,0,0,0,,So my thought process here is that I'm going to
Dialogue: 0,0:07:46.75,0:07:50.14,Default,,0,0,0,,have a static method on this
Dialogue: 0,0:07:50.14,0:07:51.84,Default,,0,0,0,,OpenWeatherMapProxy.
Dialogue: 0,0:07:51.84,0:07:54.76,Default,,0,0,0,,What it will do is it will, when you give it
Dialogue: 0,0:07:54.76,0:07:57.40,Default,,0,0,0,,the latitude and longitude, it's going to feed it
Dialogue: 0,0:07:57.41,0:08:00.52,Default,,0,0,0,,to this web service URL
Dialogue: 0,0:08:01.57,0:08:03.46,Default,,0,0,0,,that we have here, replacing the latitude
Dialogue: 0,0:08:03.47,0:08:05.08,Default,,0,0,0,,and the longitude that we're going to get
Dialogue: 0,0:08:05.08,0:08:07.38,Default,,0,0,0,,from our device's GPS,
Dialogue: 0,0:08:07.38,0:08:11.24,Default,,0,0,0,,and it will convert the data that comes back
Dialogue: 0,0:08:11.24,0:08:14.41,Default,,0,0,0,,in JSON format into a series of classes
Dialogue: 0,0:08:14.41,0:08:16.43,Default,,0,0,0,,that we can then navigate through, pull out
Dialogue: 0,0:08:16.43,0:08:18.69,Default,,0,0,0,,the bits we want to display to the user
Dialogue: 0,0:08:18.69,0:08:20.37,Default,,0,0,0,,on the screen.
Dialogue: 0,0:08:20.37,0:08:21.89,Default,,0,0,0,,Hopefully that all made sense.
Dialogue: 0,0:08:21.89,0:08:24.61,Default,,0,0,0,,You'll see it as we move forward here.
Dialogue: 0,0:08:24.61,0:08:26.61,Default,,0,0,0,,So what I want to do, just as we start
Dialogue: 0,0:08:26.61,0:08:29.31,Default,,0,0,0,,playing with this idea, is,
Dialogue: 0,0:08:29.31,0:08:31.27,Default,,0,0,0,,actually, let me go ahead and get rid of that.
Dialogue: 0,0:08:34.01,0:08:37.55,Default,,0,0,0,,I'm going to start just with a StackPanel.
Dialogue: 0,0:08:37.55,0:08:38.91,Default,,0,0,0,,I'm not going to get too fancy with this
Dialogue: 0,0:08:38.91,0:08:40.35,Default,,0,0,0,,just to begin with.
Dialogue: 0,0:08:40.35,0:08:42.48,Default,,0,0,0,,But I'm going to set the Background="HotPink"
Dialogue: 0,0:08:42.48,0:08:45.52,Default,,0,0,0,,because I saw a cool demo with
Dialogue: 0,0:08:45.53,0:08:47.58,Default,,0,0,0,,a hot pink background and it looked pretty cool,
Dialogue: 0,0:08:47.59,0:08:49.37,Default,,0,0,0,,and it's very different from anything else
Dialogue: 0,0:08:49.37,0:08:51.39,Default,,0,0,0,,that you'll see
Dialogue: 0,0:08:51.39,0:08:53.05,Default,,0,0,0,,out there right now.
Dialogue: 0,0:08:53.05,0:08:55.40,Default,,0,0,0,,I am going to add a Button with
Dialogue: 0,0:08:56.77,0:08:59.95,Default,,0,0,0,,Content="Get Weather".
Dialogue: 0,0:09:02.07,0:09:04.40,Default,,0,0,0,,I'll say set a Click Event.
Dialogue: 0,0:09:05.57,0:09:07.69,Default,,0,0,0,,I think that's all I'll need to do there.
Dialogue: 0,0:09:07.69,0:09:11.03,Default,,0,0,0,,Then I'm going to add a TextBlock.
Dialogue: 0,0:09:11.03,0:09:14.66,Default,,0,0,0,,We're going to call this, name this
Dialogue: 0,0:09:14.66,0:09:15.90,Default,,0,0,0,,"ResultTextBlock"
Dialogue: 0,0:09:18.58,0:09:20.17,Default,,0,0,0,,"ResultTextBlock".
Dialogue: 0,0:09:20.18,0:09:22.55,Default,,0,0,0,,I want you to know that this is not, ultimately,
Dialogue: 0,0:09:22.56,0:09:25.40,Default,,0,0,0,,what I'm going to have for my layout.
Dialogue: 0,0:09:25.40,0:09:28.37,Default,,0,0,0,,This is just for me to be able to test
Dialogue: 0,0:09:28.38,0:09:31.59,Default,,0,0,0,,the process of going out and grabbing
Dialogue: 0,0:09:31.60,0:09:34.57,Default,,0,0,0,,the data, and then displaying something to the user.
Dialogue: 0,0:09:34.58,0:09:37.86,Default,,0,0,0,,Once I can get that hardest, here's my thought process.
Dialogue: 0,0:09:37.86,0:09:39.69,Default,,0,0,0,,Whenever I go sit down to build an application,
Dialogue: 0,0:09:39.69,0:09:42.89,Default,,0,0,0,,I always like to tackle the most difficult aspects
Dialogue: 0,0:09:42.89,0:09:45.77,Default,,0,0,0,,of the application first because
Dialogue: 0,0:09:45.77,0:09:48.39,Default,,0,0,0,,then I get some degree of confidence
Dialogue: 0,0:09:48.39,0:09:50.59,Default,,0,0,0,,that I know what it will do.
Dialogue: 0,0:09:50.59,0:09:52.97,Default,,0,0,0,,I don't make any assumptions beforehand
Dialogue: 0,0:09:52.97,0:09:55.23,Default,,0,0,0,,what it's going to do, how it's going to operate.
Dialogue: 0,0:09:55.23,0:09:57.67,Default,,0,0,0,,That might adjust the way that I lay things out,
Dialogue: 0,0:09:57.67,0:09:59.80,Default,,0,0,0,,the way that I approach the rest of the application.
Dialogue: 0,0:09:59.80,0:10:01.88,Default,,0,0,0,,So I always attack the most difficult part
Dialogue: 0,0:10:01.88,0:10:03.16,Default,,0,0,0,,of the application first.
Dialogue: 0,0:10:03.16,0:10:05.92,Default,,0,0,0,,Typically, that's going to be any of the internals
Dialogue: 0,0:10:05.92,0:10:07.76,Default,,0,0,0,,of the application.
Dialogue: 0,0:10:07.76,0:10:10.62,Default,,0,0,0,,It's going to be business logic,
Dialogue: 0,0:10:10.62,0:10:13.94,Default,,0,0,0,,it's going to be any data access, it's going to be making
Dialogue: 0,0:10:13.94,0:10:16.77,Default,,0,0,0,,calls out to web APIs like we're doing here.
Dialogue: 0,0:10:16.77,0:10:18.82,Default,,0,0,0,,Once I can get those question marks
Dialogue: 0,0:10:18.83,0:10:21.74,Default,,0,0,0,,in my mind resolved, then it makes
Dialogue: 0,0:10:21.74,0:10:23.72,Default,,0,0,0,,building the rest of the application fairly easy.
Dialogue: 0,0:10:23.72,0:10:25.22,Default,,0,0,0,,That's what I'm doing here.
Dialogue: 0,0:10:25.22,0:10:27.80,Default,,0,0,0,,I'm just going to create some initial code
Dialogue: 0,0:10:27.80,0:10:29.30,Default,,0,0,0,,that I'm ultimately going to probably throw
Dialogue: 0,0:10:29.30,0:10:31.48,Default,,0,0,0,,all this stuff away.
Dialogue: 0,0:10:31.48,0:10:35.67,Default,,0,0,0,,So at any rate, let's go ahead and hit F12 there.
Dialogue: 0,0:10:35.67,0:10:37.61,Default,,0,0,0,,So now we have a Button_Click Event,
Dialogue: 0,0:10:37.61,0:10:39.47,Default,,0,0,0,,and we're going to make a call into this
Dialogue: 0,0:10:39.47,0:10:42.27,Default,,0,0,0,,OpenWeatherMapProxy class.
Dialogue: 0,0:10:43.61,0:10:46.69,Default,,0,0,0,,What I want to do is create a
Dialogue: 0,0:10:48.30,0:10:50.58,Default,,0,0,0,,public static RootObject GetWeather
Dialogue: 0,0:10:50.58,0:10:54.30,Default,,0,0,0,,public static RootObject GetWeather.
Dialogue: 0,0:10:57.37,0:10:59.91,Default,,0,0,0,,Eventually, I'll pass in the latitude and longitude.
Dialogue: 0,0:10:59.91,0:11:01.77,Default,,0,0,0,,Should I do that now?
Dialogue: 0,0:11:01.77,0:11:03.69,Default,,0,0,0,,Yeah, sure, why not?
Dialogue: 0,0:11:03.69,0:11:05.83,Default,,0,0,0,,I can always ignore it.
Dialogue: 0,0:11:08.35,0:11:11.79,Default,,0,0,0,,Whoops, double latitude,
Dialogue: 0,0:11:11.79,0:11:14.40,Default,,0,0,0,,double longitude.
Dialogue: 0,0:11:16.36,0:11:18.17,Default,,0,0,0,,Alright, great.
Dialogue: 0,0:11:21.49,0:11:23.89,Default,,0,0,0,,So what I need to do is make a call
Dialogue: 0,0:11:23.89,0:11:26.53,Default,,0,0,0,,out to this web service.
Dialogue: 0,0:11:26.53,0:11:29.01,Default,,0,0,0,,The way that I'll do that is through a class
Dialogue: 0,0:11:29.01,0:11:32.19,Default,,0,0,0,,called the HttpClient.
Dialogue: 0,0:11:32.19,0:11:33.81,Default,,0,0,0,,To add this, I'm actually going to go
Dialogue: 0,0:11:33.81,0:11:37.01,Default,,0,0,0,,to Tools, NuGet Package Manager.
Dialogue: 0,0:11:38.79,0:11:40.72,Default,,0,0,0,,I'm going to Manage NuGet Packages
Dialogue: 0,0:11:40.72,0:11:42.97,Default,,0,0,0,,for the Solution.
Dialogue: 0,0:11:42.97,0:11:46.68,Default,,0,0,0,,I'm going to search for the HttpClient.
Dialogue: 0,0:11:50.32,0:11:53.37,Default,,0,0,0,,I'm going to install this.
Dialogue: 0,0:12:00.40,0:12:03.88,Default,,0,0,0,,It asked me, "Do you want to add all these?"
Dialogue: 0,0:12:03.88,0:12:06.26,Default,,0,0,0,,Yes, yes,
Dialogue: 0,0:12:06.26,0:12:08.14,Default,,0,0,0,,and I accept.
Dialogue: 0,0:12:14.41,0:12:16.33,Default,,0,0,0,,Alright, very good.
Dialogue: 0,0:12:18.38,0:12:22.25,Default,,0,0,0,,So now what I want to do is
Dialogue: 0,0:12:22.25,0:12:23.63,Default,,0,0,0,,go here.
Dialogue: 0,0:12:23.63,0:12:26.21,Default,,0,0,0,,Should be able to find it.
Dialogue: 0,0:12:26.21,0:12:28.74,Default,,0,0,0,,I'm going to add that using statement.
Dialogue: 0,0:12:32.21,0:12:36.11,Default,,0,0,0,,We'll go var http = new HttpClient()
Dialogue: 0,0:12:36.11,0:12:39.32,Default,,0,0,0,,var http = new HttpClient(), like so.
Dialogue: 0,0:12:41.30,0:12:44.00,Default,,0,0,0,,Now what I want to do is
Dialogue: 0,0:12:44.01,0:12:46.56,Default,,0,0,0,,get a response object.
Dialogue: 0,0:12:46.56,0:12:49.47,Default,,0,0,0,,This a type HTTP response message.
Dialogue: 0,0:12:50.88,0:12:54.12,Default,,0,0,0,,I'm going to get to it by calling the GetAsync method.
Dialogue: 0,0:12:54.12,0:12:57.58,Default,,0,0,0,,So what we'll do is give it a URI,
Dialogue: 0,0:12:57.59,0:13:00.68,Default,,0,0,0,,a string URI that we're going to request.
Dialogue: 0,0:13:00.68,0:13:02.45,Default,,0,0,0,,Any time we see the word async,
Dialogue: 0,0:13:02.45,0:13:04.01,Default,,0,0,0,,what do we need to do?
Dialogue: 0,0:13:04.01,0:13:05.45,Default,,0,0,0,,Remember the formula.
Dialogue: 0,0:13:05.45,0:13:09.61,Default,,0,0,0,,We need to say, "I will wait for the results,"
Dialogue: 0,0:13:09.61,0:13:11.99,Default,,0,0,0,,and that means I need to tell my method
Dialogue: 0,0:13:11.99,0:13:15.51,Default,,0,0,0,,that this is an async method, right?
Dialogue: 0,0:13:15.51,0:13:19.33,Default,,0,0,0,,Then I need to give it the URL.
Dialogue: 0,0:13:19.33,0:13:22.31,Default,,0,0,0,,If you recall what we did here,
Dialogue: 0,0:13:22.31,0:13:24.75,Default,,0,0,0,,I should be able to just copy this in
Dialogue: 0,0:13:24.75,0:13:28.21,Default,,0,0,0,,for testing purposes, and just go ahead
Dialogue: 0,0:13:28.21,0:13:30.21,Default,,0,0,0,,and pop that in there like so.
Dialogue: 0,0:13:30.21,0:13:32.45,Default,,0,0,0,,We should be able to get back
Dialogue: 0,0:13:32.45,0:13:35.51,Default,,0,0,0,,whatever data comes from that,
Dialogue: 0,0:13:35.51,0:13:37.36,Default,,0,0,0,,comes back from that method.
Dialogue: 0,0:13:38.89,0:13:40.65,Default,,0,0,0,,Next up, I need to grab a result,
Dialogue: 0,0:13:40.65,0:13:42.52,Default,,0,0,0,,and the result will be
Dialogue: 0,0:13:44.19,0:13:47.46,Default,,0,0,0,,what comes back in the
Dialogue: 0,0:13:49.35,0:13:51.62,Default,,0,0,0,,response.Content.ReadAsStringAsync()
Dialogue: 0,0:13:52.72,0:13:55.89,Default,,0,0,0,,response.Content.ReadAsStringAsync().
Dialogue: 0,0:13:55.89,0:13:57.51,Default,,0,0,0,,Again, we see the async keyword.
Dialogue: 0,0:13:57.51,0:14:00.59,Default,,0,0,0,,That means we need to await that as well.
Dialogue: 0,0:14:00.59,0:14:04.95,Default,,0,0,0,,Now I have this in a string format.
Dialogue: 0,0:14:04.95,0:14:08.09,Default,,0,0,0,,Now what I need to do is I need to serialize.
Dialogue: 0,0:14:08.09,0:14:11.50,Default,,0,0,0,,I need to take all that string
Dialogue: 0,0:14:11.50,0:14:15.08,Default,,0,0,0,,that we see when we looked here,
Dialogue: 0,0:14:15.08,0:14:18.05,Default,,0,0,0,,and we need to convert that into an Object Graph.
Dialogue: 0,0:14:19.27,0:14:23.08,Default,,0,0,0,,All of these, the RootObject and all of the
Dialogue: 0,0:14:23.08,0:14:26.00,Default,,0,0,0,,objects that it has references to.
Dialogue: 0,0:14:26.00,0:14:29.09,Default,,0,0,0,,To do that, what I need to do is
Dialogue: 0,0:14:30.34,0:14:34.37,Default,,0,0,0,,use an object called the DataContractJsonSerializer.
Dialogue: 0,0:14:36.63,0:14:38.42,Default,,0,0,0,,I'm going to create something called a serializer.
Dialogue: 0,0:14:38.42,0:14:40.84,Default,,0,0,0,,It's an object that knows how to serialize
Dialogue: 0,0:14:40.84,0:14:43.96,Default,,0,0,0,,and deserialize from JSON.
Dialogue: 0,0:14:43.96,0:14:46.27,Default,,0,0,0,,We'll go DataContractJsonSerializer
Dialogue: 0,0:14:46.27,0:14:48.89,Default,,0,0,0,,DataContractJsonSerializer.
Dialogue: 0,0:14:48.89,0:14:51.89,Default,,0,0,0,,As you can see, it's not really part of my
Dialogue: 0,0:14:51.89,0:14:53.23,Default,,0,0,0,,Project just yet.
Dialogue: 0,0:14:53.23,0:14:56.07,Default,,0,0,0,,However, I can just hit Control+".".
Dialogue: 0,0:14:56.07,0:14:59.45,Default,,0,0,0,,and I can add that System.Runtime.Serialization.Json
Dialogue: 0,0:14:59.45,0:15:02.35,Default,,0,0,0,,System.Runtime.Serialization.Json namespace, and we should
Dialogue: 0,0:15:02.35,0:15:04.36,Default,,0,0,0,,be good to go there.
Dialogue: 0,0:15:06.11,0:15:10.03,Default,,0,0,0,,I need to give it the typeof
Dialogue: 0,0:15:10.04,0:15:11.73,Default,,0,0,0,,class that I want to work with.
Dialogue: 0,0:15:11.73,0:15:13.71,Default,,0,0,0,,In this case, we'll start with the RootObject,
Dialogue: 0,0:15:13.71,0:15:16.01,Default,,0,0,0,,and it'll have references to everything else
Dialogue: 0,0:15:16.01,0:15:17.48,Default,,0,0,0,,that it needs.
Dialogue: 0,0:15:19.71,0:15:22.19,Default,,0,0,0,,Oh, we need to create a new instance of that.
Dialogue: 0,0:15:22.20,0:15:24.45,Default,,0,0,0,,There we go.
Dialogue: 0,0:15:24.45,0:15:27.67,Default,,0,0,0,,Now, in order for this to work, we have to do something,
Dialogue: 0,0:15:27.67,0:15:29.73,Default,,0,0,0,,we have to adorn each of these classes
Dialogue: 0,0:15:29.73,0:15:32.94,Default,,0,0,0,,and their properties with special
Dialogue: 0,0:15:34.28,0:15:36.09,Default,,0,0,0,,attributes.
Dialogue: 0,0:15:36.09,0:15:38.63,Default,,0,0,0,,To get this to work right, every class is going to
Dialogue: 0,0:15:38.63,0:15:40.03,Default,,0,0,0,,have to be adorned with something called
Dialogue: 0,0:15:40.03,0:15:41.62,Default,,0,0,0,,a DataContract.
Dialogue: 0,0:15:43.17,0:15:45.49,Default,,0,0,0,,This attribute is in a namespace that we
Dialogue: 0,0:15:45.49,0:15:48.96,Default,,0,0,0,,need to add, System.Runtime.Serialization
Dialogue: 0,0:15:50.40,0:15:53.97,Default,,0,0,0,,This will just tell the serializer that, "Hey,
Dialogue: 0,0:15:53.97,0:15:57.84,Default,,0,0,0,,"treat this like a class, and treat this like
Dialogue: 0,0:15:57.84,0:15:59.04,Default,,0,0,0,,"a property."
Dialogue: 0,0:15:59.04,0:16:01.42,Default,,0,0,0,,We'll go DataMember for each property.
Dialogue: 0,0:16:01.42,0:16:04.02,Default,,0,0,0,,Now we have to go through
Dialogue: 0,0:16:04.02,0:16:06.82,Default,,0,0,0,,and add that attribute on top of every class
Dialogue: 0,0:16:06.82,0:16:09.16,Default,,0,0,0,,and every member of the class.
Dialogue: 0,0:16:09.16,0:16:11.52,Default,,0,0,0,,I'm just going to go ahead and do this.
Dialogue: 0,0:16:11.52,0:16:13.78,Default,,0,0,0,,It's going to take me a minute or two
Dialogue: 0,0:16:13.78,0:16:16.47,Default,,0,0,0,,of just copying and pasting a lot.
Dialogue: 0,0:16:21.42,0:16:23.24,Default,,0,0,0,,This is a common thing that you'll do whenever
Dialogue: 0,0:16:23.24,0:16:27.23,Default,,0,0,0,,you're calling out
Dialogue: 0,0:16:29.06,0:16:31.01,Default,,0,0,0,,to web APIs.
Dialogue: 0,0:16:31.01,0:16:33.71,Default,,0,0,0,,I don't think that you could be a professional developer
Dialogue: 0,0:16:33.71,0:16:37.89,Default,,0,0,0,,nowadays without knowing these techniques,
Dialogue: 0,0:16:37.89,0:16:40.99,Default,,0,0,0,,being able to serialize and deserialize from XML
Dialogue: 0,0:16:41.00,0:16:44.21,Default,,0,0,0,,and JSON format, and maybe other custom formats,
Dialogue: 0,0:16:44.22,0:16:47.10,Default,,0,0,0,,too, like some binary format.
Dialogue: 0,0:16:47.10,0:16:50.76,Default,,0,0,0,,It's a pretty crucial skill to have in your toolbelt.
Dialogue: 0,0:16:50.76,0:16:53.48,Default,,0,0,0,,This is just one
Dialogue: 0,0:16:53.48,0:16:55.71,Default,,0,0,0,,possible way to go about this.
Dialogue: 0,0:16:57.46,0:16:58.96,Default,,0,0,0,,I see something that caught my eye
Dialogue: 0,0:16:58.96,0:17:00.63,Default,,0,0,0,,just a moment ago.
Dialogue: 0,0:17:03.38,0:17:05.22,Default,,0,0,0,,It spurred a memory
Dialogue: 0,0:17:05.22,0:17:08.01,Default,,0,0,0,,of frustrations past.
Dialogue: 0,0:17:09.26,0:17:11.16,Default,,0,0,0,,Let me get back to it here in a just a second.
Dialogue: 0,0:17:11.17,0:17:12.68,Default,,0,0,0,,There'll be some things that I want to change
Dialogue: 0,0:17:12.68,0:17:15.70,Default,,0,0,0,,the names of that I don't like how they're
Dialogue: 0,0:17:15.70,0:17:18.48,Default,,0,0,0,,automatically named by that
Dialogue: 0,0:17:18.48,0:17:20.54,Default,,0,0,0,,tool that we used,
Dialogue: 0,0:17:20.55,0:17:23.68,Default,,0,0,0,,that free website that converts
Dialogue: 0,0:17:25.15,0:17:27.66,Default,,0,0,0,,your JSON into C#
Dialogue: 0,0:17:27.66,0:17:29.78,Default,,0,0,0,,POCO classes.
Dialogue: 0,0:17:29.78,0:17:32.22,Default,,0,0,0,,Yeah, for example, this item here
Dialogue: 0,0:17:32.22,0:17:33.44,Default,,0,0,0,,has an invalid name.
Dialogue: 0,0:17:33.44,0:17:35.44,Default,,0,0,0,,In fact, what I'm going to do is just
Dialogue: 0,0:17:35.44,0:17:37.40,Default,,0,0,0,,comment this out completely.
Dialogue: 0,0:17:37.40,0:17:39.64,Default,,0,0,0,,I'm not going to even use this at all.
Dialogue: 0,0:17:41.68,0:17:45.09,Default,,0,0,0,,Hopefully, the deserializer,
Dialogue: 0,0:17:45.09,0:17:47.67,Default,,0,0,0,,the DataContractJsonSerializer
Dialogue: 0,0:17:47.67,0:17:50.19,Default,,0,0,0,,will just say, "Oh, okay, they don't have a class for that.
Dialogue: 0,0:17:50.19,0:17:53.49,Default,,0,0,0,,"We'll just ignore that," as it tries to pair up
Dialogue: 0,0:17:53.49,0:17:55.65,Default,,0,0,0,,all of the data
Dialogue: 0,0:17:55.65,0:17:58.25,Default,,0,0,0,,that it has with all the class
Dialogue: 0,0:17:58.25,0:18:00.63,Default,,0,0,0,,and property names.
Dialogue: 0,0:18:00.63,0:18:02.43,Default,,0,0,0,,So that's the only thing that I think
Dialogue: 0,0:18:02.43,0:18:03.65,Default,,0,0,0,,I was concerned about.
Dialogue: 0,0:18:03.65,0:18:05.86,Default,,0,0,0,,Let's go ahead and continue on here.
Dialogue: 0,0:18:07.73,0:18:09.17,Default,,0,0,0,,Now what we're going to need to do is get
Dialogue: 0,0:18:09.17,0:18:11.93,Default,,0,0,0,,a MemoryStream.
Dialogue: 0,0:18:11.93,0:18:13.98,Default,,0,0,0,,New MemoryStream.
Dialogue: 0,0:18:17.60,0:18:19.52,Default,,0,0,0,,Let me go ahead and hit Control+"."
Dialogue: 0,0:18:19.52,0:18:21.22,Default,,0,0,0,,on my keyboard
Dialogue: 0,0:18:23.96,0:18:26.66,Default,,0,0,0,,and add the System.IO namespace.
Dialogue: 0,0:18:30.45,0:18:32.55,Default,,0,0,0,,I want to tell it that we're working
Dialogue: 0,0:18:32.55,0:18:35.06,Default,,0,0,0,,with a certain type of Encoding,
Dialogue: 0,0:18:36.97,0:18:40.98,Default,,0,0,0,,specifically, the UTF-8 Encoding.
Dialogue: 0,0:18:42.26,0:18:44.27,Default,,0,0,0,,We're going to call GetBytes.
Dialogue: 0,0:18:44.27,0:18:45.49,Default,,0,0,0,,The reason why we're doing this
Dialogue: 0,0:18:45.50,0:18:48.01,Default,,0,0,0,,is kind of a long story.
Dialogue: 0,0:18:49.36,0:18:51.34,Default,,0,0,0,,I don't really want to talk about it
Dialogue: 0,0:18:51.34,0:18:52.56,Default,,0,0,0,,at the moment.
Dialogue: 0,0:18:52.56,0:18:54.58,Default,,0,0,0,,Most of the time, whenever you're grabbing JSON
Dialogue: 0,0:18:54.58,0:18:56.24,Default,,0,0,0,,and you're working with it, you're going to need
Dialogue: 0,0:18:56.24,0:18:59.10,Default,,0,0,0,,to work with the,
Dialogue: 0,0:18:59.10,0:19:02.04,Default,,0,0,0,,the way that the text is encoded is just UTF-8,
Dialogue: 0,0:19:02.04,0:19:06.01,Default,,0,0,0,,so you'll often use this similar line of code to this.
Dialogue: 0,0:19:06.01,0:19:08.18,Default,,0,0,0,,Just keep that in mind.
Dialogue: 0,0:19:08.18,0:19:11.22,Default,,0,0,0,,Finally, now that we're ready to accept
Dialogue: 0,0:19:11.22,0:19:13.76,Default,,0,0,0,,a MemoryStream, and a Stream
Dialogue: 0,0:19:13.76,0:19:15.87,Default,,0,0,0,,is just a
Dialogue: 0,0:19:17.74,0:19:18.70,Default,,0,0,0,,straw.
Dialogue: 0,0:19:18.70,0:19:21.16,Default,,0,0,0,,It allows us to just have data come in and go out.
Dialogue: 0,0:19:21.16,0:19:22.80,Default,,0,0,0,,Whenever you have things that are happening
Dialogue: 0,0:19:22.80,0:19:24.50,Default,,0,0,0,,at two different speeds, you have something
Dialogue: 0,0:19:24.50,0:19:26.78,Default,,0,0,0,,sending data at a different rate of speed
Dialogue: 0,0:19:26.78,0:19:29.56,Default,,0,0,0,,than something accepting data, you use a Stream.
Dialogue: 0,0:19:30.90,0:19:32.17,Default,,0,0,0,,Here we're going to use a MemoryStream.
Dialogue: 0,0:19:32.17,0:19:34.67,Default,,0,0,0,,We're just going to keep everything in memory
Dialogue: 0,0:19:34.67,0:19:37.11,Default,,0,0,0,,until it all gets sorted out.
Dialogue: 0,0:19:37.11,0:19:40.26,Default,,0,0,0,,Data will go in one end, and then it'll be taken out
Dialogue: 0,0:19:40.26,0:19:42.70,Default,,0,0,0,,as it's needed on the other end.
Dialogue: 0,0:19:42.70,0:19:46.50,Default,,0,0,0,,Finally, we're going to go ahead and do,
Dialogue: 0,0:19:48.29,0:19:51.08,Default,,0,0,0,,get the actual data out of the serializer.
Dialogue: 0,0:19:53.96,0:19:55.90,Default,,0,0,0,,ReadObject
Dialogue: 0,0:19:57.65,0:19:59.91,Default,,0,0,0,,and
Dialogue: 0,0:19:59.91,0:20:02.83,Default,,0,0,0,,let's also then cast that
Dialogue: 0,0:20:02.84,0:20:04.87,Default,,0,0,0,,to a RootObject.
Dialogue: 0,0:20:04.88,0:20:07.30,Default,,0,0,0,,Then we're going to return the data.
Dialogue: 0,0:20:08.74,0:20:11.62,Default,,0,0,0,,So I realize this is pretty meaty stuff here.
Dialogue: 0,0:20:11.62,0:20:13.69,Default,,0,0,0,,It looks like there's one last thing that I need to do.
Dialogue: 0,0:20:13.70,0:20:15.93,Default,,0,0,0,,If I hover my mouse cursor over this,
Dialogue: 0,0:20:15.94,0:20:19.28,Default,,0,0,0,,we've created an async method,
Dialogue: 0,0:20:19.28,0:20:21.99,Default,,0,0,0,,but we've not adorned
Dialogue: 0,0:20:21.99,0:20:24.79,Default,,0,0,0,,the return object as a Task.
Dialogue: 0,0:20:24.79,0:20:26.77,Default,,0,0,0,,So we need to say, actually, what we're going to
Dialogue: 0,0:20:26.77,0:20:29.15,Default,,0,0,0,,be returning is not a RootObject,
Dialogue: 0,0:20:29.15,0:20:32.87,Default,,0,0,0,,but a promise that when this is completed,
Dialogue: 0,0:20:32.87,0:20:35.45,Default,,0,0,0,,it will give us the type RootObject.
Dialogue: 0,0:20:35.45,0:20:37.59,Default,,0,0,0,,That's what a Task object is.
Dialogue: 0,0:20:41.03,0:20:43.96,Default,,0,0,0,,That should work, hopefully.
Dialogue: 0,0:20:43.96,0:20:46.66,Default,,0,0,0,,We'll test that out in just a moment here.
Dialogue: 0,0:20:46.66,0:20:49.64,Default,,0,0,0,,So let's go over here to our MainPage.xaml
Dialogue: 0,0:20:49.64,0:20:52.88,Default,,0,0,0,,and make a call into
Dialogue: 0,0:20:52.88,0:20:53.84,Default,,0,0,0,,that.
Dialogue: 0,0:20:53.84,0:20:55.26,Default,,0,0,0,,So let's go
Dialogue: 0,0:20:57.03,0:21:00.37,Default,,0,0,0,,var weather equals
Dialogue: 0,0:21:03.44,0:21:05.94,Default,,0,0,0,,new, well, actually, let's not do it that way.
Dialogue: 0,0:21:05.94,0:21:09.46,Default,,0,0,0,,Let's go RootObject myWeather
Dialogue: 0,0:21:09.46,0:21:11.37,Default,,0,0,0,,RootObject myWeather = OpenWeatherMapProxy.GetWeather()
Dialogue: 0,0:21:13.38,0:21:16.33,Default,,0,0,0,,RootObject myWeather = OpenWeatherMapProxy.GetWeather()
Dialogue: 0,0:21:20.84,0:21:24.57,Default,,0,0,0,,RootObject myWeather = OpenWeatherMapProxy.GetWeather().
Dialogue: 0,0:21:24.57,0:21:27.20,Default,,0,0,0,,We'll give it just
Dialogue: 0,0:21:32.92,0:21:34.62,Default,,0,0,0,,a fake
Dialogue: 0,0:21:39.72,0:21:42.59,Default,,0,0,0,,latitude and longitude because I know
Dialogue: 0,0:21:42.59,0:21:45.54,Default,,0,0,0,,we're going to be hard coding that.
Dialogue: 0,0:21:49.61,0:21:53.21,Default,,0,0,0,,This has to be awaited, right?
Dialogue: 0,0:21:53.21,0:21:55.76,Default,,0,0,0,,That means this has to be async, right?
Dialogue: 0,0:22:00.77,0:22:02.81,Default,,0,0,0,,So that looks like that works, great.
Dialogue: 0,0:22:02.81,0:22:04.83,Default,,0,0,0,,Let's move that over a little bit.
Dialogue: 0,0:22:06.85,0:22:08.43,Default,,0,0,0,,Now that we have the weather, we should
Dialogue: 0,0:22:08.43,0:22:12.62,Default,,0,0,0,,be able to, for example, in the ResultTextBlock.Text,
Dialogue: 0,0:22:13.83,0:22:16.23,Default,,0,0,0,,we should be able to go
Dialogue: 0,0:22:17.48,0:22:20.80,Default,,0,0,0,,myWeather.name,
Dialogue: 0,0:22:23.15,0:22:26.56,Default,,0,0,0,,and then let's concatenate that to
Dialogue: 0,0:22:28.03,0:22:30.05,Default,,0,0,0,,myWeather.
Dialogue: 0,0:22:30.05,0:22:32.32,Default,,0,0,0,,What else can we get here?
Dialogue: 0,0:22:35.93,0:22:38.26,Default,,0,0,0,,I think if we do, if we want to get to the temperature,
Dialogue: 0,0:22:38.26,0:22:40.50,Default,,0,0,0,,we go to myWeather.main.temp
Dialogue: 0,0:22:42.42,0:22:43.55,Default,,0,0,0,,myWeather.main.temp.
Dialogue: 0,0:22:43.55,0:22:45.01,Default,,0,0,0,,There we go.
Dialogue: 0,0:22:45.01,0:22:48.42,Default,,0,0,0,,Then I think, also,
Dialogue: 0,0:22:48.42,0:22:50.14,Default,,0,0,0,,we can do this,
Dialogue: 0,0:22:50.14,0:22:52.78,Default,,0,0,0,,my... plus
Dialogue: 0,0:22:52.78,0:22:56.03,Default,,0,0,0,,myWeather dot...
Dialogue: 0,0:22:59.90,0:23:01.64,Default,,0,0,0,,What we'll get back with this weather
Dialogue: 0,0:23:01.64,0:23:04.12,Default,,0,0,0,,is it'll be a list of weather items.
Dialogue: 0,0:23:04.12,0:23:06.58,Default,,0,0,0,,We want the first weather item.
Dialogue: 0,0:23:06.58,0:23:08.18,Default,,0,0,0,,I think the other weather items are for
Dialogue: 0,0:23:08.18,0:23:10.66,Default,,0,0,0,,different hours or different days.
Dialogue: 0,0:23:10.66,0:23:12.56,Default,,0,0,0,,Then we'll say, "Give me a description
Dialogue: 0,0:23:12.56,0:23:16.16,Default,,0,0,0,,"of what the weather is."
Dialogue: 0,0:23:18.24,0:23:19.19,Default,,0,0,0,,So let's go ahead and run it.
Dialogue: 0,0:23:19.19,0:23:21.07,Default,,0,0,0,,I'm sure we'll hit some bugs
Dialogue: 0,0:23:21.07,0:23:22.88,Default,,0,0,0,,in just a moment.
Dialogue: 0,0:23:26.43,0:23:27.54,Default,,0,0,0,,Yeah.
Dialogue: 0,0:23:28.97,0:23:30.03,Default,,0,0,0,,Oh, here we go.
Dialogue: 0,0:23:30.03,0:23:31.87,Default,,0,0,0,,That's easy to fix.
Dialogue: 0,0:23:31.87,0:23:34.01,Default,,0,0,0,,I got rid of the class, so I have
Dialogue: 0,0:23:34.01,0:23:35.39,Default,,0,0,0,,to get rid of that as well.
Dialogue: 0,0:23:35.39,0:23:37.35,Default,,0,0,0,,Let's try it now.
Dialogue: 0,0:23:43.63,0:23:45.20,Default,,0,0,0,,Alright, well, we got our hot pink.
Dialogue: 0,0:23:45.20,0:23:48.01,Default,,0,0,0,,At least that's going for us.
Dialogue: 0,0:23:48.01,0:23:50.33,Default,,0,0,0,,I'll click Get Weather, and awesome.
Dialogue: 0,0:23:50.33,0:23:52.43,Default,,0,0,0,,Look, we got Dallas County.
Dialogue: 0,0:23:52.43,0:23:55.17,Default,,0,0,0,,We get the temperature is 299,
Dialogue: 0,0:23:55.17,0:23:57.07,Default,,0,0,0,,so that's Kelvin degrees.
Dialogue: 0,0:23:57.07,0:23:59.99,Default,,0,0,0,,We need to use, we can use Celsius
Dialogue: 0,0:24:01.95,0:24:04.45,Default,,0,0,0,,for those who live in the Metric System,
Dialogue: 0,0:24:04.46,0:24:07.44,Default,,0,0,0,,or Fahrenheit for those who live
Dialogue: 0,0:24:07.44,0:24:09.60,Default,,0,0,0,,in the Imperial System.
Dialogue: 0,0:24:10.98,0:24:12.64,Default,,0,0,0,,But at any rate, I was able to grab out
Dialogue: 0,0:24:12.64,0:24:14.50,Default,,0,0,0,,where I'm at currently.
Dialogue: 0,0:24:14.50,0:24:16.70,Default,,0,0,0,,So I'm in Dallas County.
Dialogue: 0,0:24:16.70,0:24:19.14,Default,,0,0,0,,This is on my local desktop.
Dialogue: 0,0:24:19.14,0:24:21.38,Default,,0,0,0,,I don't have a GPS, but it's able to triangulate
Dialogue: 0,0:24:21.38,0:24:24.74,Default,,0,0,0,,based on where my IP Address is to determine
Dialogue: 0,0:24:24.74,0:24:26.84,Default,,0,0,0,,where I'm coming from,
Dialogue: 0,0:24:26.84,0:24:29.24,Default,,0,0,0,,and it can determine that.
Dialogue: 0,0:24:29.24,0:24:31.96,Default,,0,0,0,,Then you can see here, it's light raining,
Dialogue: 0,0:24:31.96,0:24:33.62,Default,,0,0,0,,which is true.
Dialogue: 0,0:24:33.62,0:24:36.01,Default,,0,0,0,,I think it's in the mid 70s, high 70s.
Dialogue: 0,0:24:36.01,0:24:37.39,Default,,0,0,0,,We'll have to change that.
Dialogue: 0,0:24:37.39,0:24:39.53,Default,,0,0,0,,In fact, I think what I can do here,
Dialogue: 0,0:24:39.53,0:24:41.01,Default,,0,0,0,,let's go ahead and play around with this
Dialogue: 0,0:24:41.01,0:24:43.05,Default,,0,0,0,,a little bit.
Dialogue: 0,0:24:43.05,0:24:45.72,Default,,0,0,0,,We make our call out,
Dialogue: 0,0:24:45.72,0:24:48.88,Default,,0,0,0,,I think I can hit,
Dialogue: 0,0:24:48.88,0:24:51.81,Default,,0,0,0,,do this: units=imperial
Dialogue: 0,0:24:53.45,0:24:56.03,Default,,0,0,0,,units=imperial.
Dialogue: 0,0:24:56.03,0:24:58.06,Default,,0,0,0,,See if that's correct.
Dialogue: 0,0:25:03.47,0:25:05.99,Default,,0,0,0,,Yeah, so 78 degrees.
Dialogue: 0,0:25:05.99,0:25:10.32,Default,,0,0,0,,In fact, let me do one thing here with that,
Dialogue: 0,0:25:11.51,0:25:12.94,Default,,0,0,0,,with the temperature.
Dialogue: 0,0:25:12.94,0:25:15.44,Default,,0,0,0,,I'm just going to go ahead and go
Dialogue: 0,0:25:15.44,0:25:17.26,Default,,0,0,0,,convert that to an integer, and then take
Dialogue: 0,0:25:17.26,0:25:19.52,Default,,0,0,0,,the whole thing and convert it ToString,
Dialogue: 0,0:25:21.32,0:25:22.94,Default,,0,0,0,,like that.
Dialogue: 0,0:25:25.76,0:25:28.91,Default,,0,0,0,,That will get rid of the decimal.
Dialogue: 0,0:25:28.91,0:25:30.12,Default,,0,0,0,,Great.
Dialogue: 0,0:25:30.12,0:25:32.14,Default,,0,0,0,,One other thing that I want to talk about here
Dialogue: 0,0:25:32.14,0:25:36.04,Default,,0,0,0,,before we go any further, and that is
Dialogue: 0,0:25:36.04,0:25:37.95,Default,,0,0,0,,if you look at
Dialogue: 0,0:25:40.50,0:25:43.22,Default,,0,0,0,,this, you can also get to icons.
Dialogue: 0,0:25:43.22,0:25:46.46,Default,,0,0,0,,If we scroll down, there are some icons
Dialogue: 0,0:25:46.46,0:25:48.86,Default,,0,0,0,,that are associated
Dialogue: 0,0:25:48.86,0:25:50.41,Default,,0,0,0,,with.
Dialogue: 0,0:25:51.86,0:25:54.47,Default,,0,0,0,,Let me see if I search this, icon.
Dialogue: 0,0:26:00.30,0:26:02.74,Default,,0,0,0,,Yeah, you can see that it will return back
Dialogue: 0,0:26:02.74,0:26:04.90,Default,,0,0,0,,an icon as well.
Dialogue: 0,0:26:04.90,0:26:06.62,Default,,0,0,0,,So let's just,
Dialogue: 0,0:26:08.18,0:26:11.00,Default,,0,0,0,,let's have a little fun with this, actually.
Dialogue: 0,0:26:14.51,0:26:17.22,Default,,0,0,0,,Let's add an Image control.
Dialogue: 0,0:26:22.89,0:26:24.24,Default,,0,0,0,,Let's set its Name="ResultsImage"
Dialogue: 0,0:26:24.24,0:26:28.40,Default,,0,0,0,,Name="ResultsImage".
Dialogue: 0,0:26:28.40,0:26:31.48,Default,,0,0,0,,I'll just do Width="200"
Dialogue: 0,0:26:31.48,0:26:33.45,Default,,0,0,0,,Height="200".
Dialogue: 0,0:26:36.08,0:26:39.98,Default,,0,0,0,,Then what we'll do inside of here is set the
Dialogue: 0,0:26:41.44,0:26:43.57,Default,,0,0,0,,ResultImage.Source = myWeather
Dialogue: 0,0:26:45.50,0:26:48.47,Default,,0,0,0,,ResultImage.Source = myWeather
Dialogue: 0,0:26:48.47,0:26:50.90,Default,,0,0,0,,ResultImage.Source = myWeather
Dialogue: 0,0:26:57.83,0:27:00.01,Default,,0,0,0,,I think in order to get this work,
Dialogue: 0,0:27:00.01,0:27:02.54,Default,,0,0,0,,I'm going to have to act on this a little bit.
Dialogue: 0,0:27:02.54,0:27:04.94,Default,,0,0,0,,I don't think it's going to give me back,
Dialogue: 0,0:27:04.94,0:27:07.26,Default,,0,0,0,,the data that it gives us back, if we take a look
Dialogue: 0,0:27:07.26,0:27:10.64,Default,,0,0,0,,at this, like an example,
Dialogue: 0,0:27:10.64,0:27:13.93,Default,,0,0,0,,it gives us just '04n'
Dialogue: 0,0:27:13.93,0:27:15.33,Default,,0,0,0,,as the icon.
Dialogue: 0,0:27:15.33,0:27:17.14,Default,,0,0,0,,If we take a look at
Dialogue: 0,0:27:18.85,0:27:20.50,Default,,0,0,0,,this URL,
Dialogue: 0,0:27:22.83,0:27:25.67,Default,,0,0,0,,weather conditions.
Dialogue: 0,0:27:25.68,0:27:29.01,Default,,0,0,0,,Openweathermap.org/weather-conditions.
Dialogue: 0,0:27:29.02,0:27:31.39,Default,,0,0,0,,You can see that there are a bunch
Dialogue: 0,0:27:31.40,0:27:34.61,Default,,0,0,0,,of weather icons with specific names.
Dialogue: 0,0:27:34.62,0:27:38.33,Default,,0,0,0,,'01d' for daytime, '01n' for nighttime,
Dialogue: 0,0:27:38.34,0:27:41.39,Default,,0,0,0,,'02d' for daytime, so this is sunny,
Dialogue: 0,0:27:41.40,0:27:44.48,Default,,0,0,0,,partly sunny, cloudy, overcast.
Dialogue: 0,0:27:45.84,0:27:47.89,Default,,0,0,0,,It looks like they have the descriptions, too, here,
Dialogue: 0,0:27:47.89,0:27:49.29,Default,,0,0,0,,clear sky, rain, mist.
Dialogue: 0,0:27:49.29,0:27:51.39,Default,,0,0,0,,There's nine or ten of these things
Dialogue: 0,0:27:51.39,0:27:53.13,Default,,0,0,0,,with specific names.
Dialogue: 0,0:27:53.13,0:27:55.79,Default,,0,0,0,,So what my thought process is, is we can
Dialogue: 0,0:27:55.79,0:27:57.57,Default,,0,0,0,,access these
Dialogue: 0,0:27:58.86,0:28:01.27,Default,,0,0,0,,by going to
Dialogue: 0,0:28:02.36,0:28:04.08,Default,,0,0,0,,this URL, for example,
Dialogue: 0,0:28:04.08,0:28:07.71,Default,,0,0,0,,openweathermap.org/image/w/10d.png
Dialogue: 0,0:28:07.71,0:28:10.23,Default,,0,0,0,,openweathermap.org/image/w/10d.png.
Dialogue: 0,0:28:10.23,0:28:11.73,Default,,0,0,0,,Let's open that up in a new tab,
Dialogue: 0,0:28:11.73,0:28:14.87,Default,,0,0,0,,and you can see that we get that new image there.
Dialogue: 0,0:28:14.87,0:28:17.69,Default,,0,0,0,,So let's do this.
Dialogue: 0,0:28:17.69,0:28:20.37,Default,,0,0,0,,Let's grab that URL.
Dialogue: 0,0:28:20.37,0:28:22.56,Default,,0,0,0,,I copied it to my clipboard.
Dialogue: 0,0:28:24.17,0:28:26.36,Default,,0,0,0,,Let's go string icon = String.Format
Dialogue: 0,0:28:26.37,0:28:29.12,Default,,0,0,0,,string icon = String.Format
Dialogue: 0,0:28:29.13,0:28:32.68,Default,,0,0,0,,Then we'll use that for the most part,
Dialogue: 0,0:28:32.68,0:28:34.50,Default,,0,0,0,,but I know we're only going to get that little bit
Dialogue: 0,0:28:34.51,0:28:37.06,Default,,0,0,0,,right there from the
Dialogue: 0,0:28:37.06,0:28:38.94,Default,,0,0,0,,myWeather object.
Dialogue: 0,0:28:38.94,0:28:41.63,Default,,0,0,0,,So let's go myWeather dot...
Dialogue: 0,0:28:43.28,0:28:44.52,Default,,0,0,0,,There should be an icon here.
Dialogue: 0,0:28:44.52,0:28:46.46,Default,,0,0,0,,How do I get to the icon?
Dialogue: 0,0:28:46.46,0:28:48.02,Default,,0,0,0,,Oh, yeah, it's part of weather.
Dialogue: 0,0:28:48.02,0:28:52.34,Default,,0,0,0,,So weather.icon, great.
Dialogue: 0,0:28:53.48,0:28:55.29,Default,,0,0,0,,Now that we have it, we're going to set
Dialogue: 0,0:28:55.29,0:28:59.20,Default,,0,0,0,,the Source = new BitmapImage.
Dialogue: 0,0:29:01.35,0:29:03.98,Default,,0,0,0,,Yeah, and I don't have that correct,
Dialogue: 0,0:29:05.29,0:29:07.95,Default,,0,0,0,,so I'll have to add the using statement for
Dialogue: 0,0:29:07.95,0:29:11.38,Default,,0,0,0,,Windows.UI.Xaml.Media.Imaging.
Dialogue: 0,0:29:11.39,0:29:13.34,Default,,0,0,0,,So we've added that, and now I'm going to create
Dialogue: 0,0:29:13.35,0:29:15.20,Default,,0,0,0,,a new URI.
Dialogue: 0,0:29:15.21,0:29:17.08,Default,,0,0,0,,The URI will be
Dialogue: 0,0:29:18.97,0:29:20.54,Default,,0,0,0,,the string that we just formatted.
Dialogue: 0,0:29:20.55,0:29:24.38,Default,,0,0,0,,I have to tell it what kind of URI I want there.
Dialogue: 0,0:29:24.39,0:29:28.06,Default,,0,0,0,,So URIKind.Absolute.
Dialogue: 0,0:29:29.55,0:29:32.20,Default,,0,0,0,,So let's see if that works now, and let's
Dialogue: 0,0:29:32.21,0:29:34.09,Default,,0,0,0,,run the app.
Dialogue: 0,0:29:37.51,0:29:38.77,Default,,0,0,0,,Awesome.
Dialogue: 0,0:29:38.77,0:29:40.51,Default,,0,0,0,,So here's my thought.
Dialogue: 0,0:29:40.51,0:29:42.37,Default,,0,0,0,,I don't like their icons.
Dialogue: 0,0:29:42.37,0:29:44.53,Default,,0,0,0,,It makes the app look too generic.
Dialogue: 0,0:29:44.53,0:29:47.29,Default,,0,0,0,,What if supplied my own version of the icons,
Dialogue: 0,0:29:47.29,0:29:49.51,Default,,0,0,0,,and I just change wherever
Dialogue: 0,0:29:49.51,0:29:51.15,Default,,0,0,0,,we're actually accessing them?
Dialogue: 0,0:29:51.15,0:29:52.42,Default,,0,0,0,,I won't go out to
Dialogue: 0,0:29:52.42,0:29:55.54,Default,,0,0,0,,opwenweathermap.org/image/w.
Dialogue: 0,0:29:55.54,0:29:57.80,Default,,0,0,0,,I'll just go to my Assets folder here.
Dialogue: 0,0:29:57.80,0:30:00.29,Default,,0,0,0,,We'll do that, I think, in the next video.
Dialogue: 0,0:30:02.70,0:30:04.34,Default,,0,0,0,,I think that's the next thing that we'll talk about.
Dialogue: 0,0:30:04.34,0:30:06.92,Default,,0,0,0,,If not, it'll be the video after that.
Dialogue: 0,0:30:06.92,0:30:08.38,Default,,0,0,0,,We'll add that in.
Dialogue: 0,0:30:08.38,0:30:10.38,Default,,0,0,0,,At least we'll have our own icons,
Dialogue: 0,0:30:10.38,0:30:12.66,Default,,0,0,0,,and it'll look very distinctive
Dialogue: 0,0:30:12.66,0:30:15.22,Default,,0,0,0,,for the style that we're trying to achieve.
Dialogue: 0,0:30:15.22,0:30:16.92,Default,,0,0,0,,We covered a lot of ground in this video,
Dialogue: 0,0:30:16.92,0:30:19.44,Default,,0,0,0,,but we talked about a little bit of setup,
Dialogue: 0,0:30:19.44,0:30:21.80,Default,,0,0,0,,but mostly about how to get at the data.
Dialogue: 0,0:30:21.80,0:30:23.58,Default,,0,0,0,,So we've made huge strides just in this
Dialogue: 0,0:30:23.58,0:30:25.08,Default,,0,0,0,,very first video.
Dialogue: 0,0:30:25.08,0:30:26.13,Default,,0,0,0,,We'll pick it up in the next one.
Dialogue: 0,0:30:26.13,0:30:27.90,Default,,0,0,0,,Thanks.
